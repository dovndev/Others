<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Notebook</title>
    <style type="text/css" media="all">
     * {
       margin: 0;
       padding: 0;
     }
     html {
       height: 100%;
     }
     body {
       background-color: #27D2FF;
       display: flex;
       align-items: flex-start;
       justify-content: center;
       flex-direction: column;
       font-family: monospace;
       width: 100%;
       height: 100%;
       position: fixed;
       top: 0;
       left: 0;
     }
     .root {
       height: 100%;
       width: 100%;
     }
     .header {
       display: flex;
       justify-content: center;
       align-items: center;
       font-size: 50px;
       color: white;
       height: 10%;
       width: 100%;
     }
     .input_cont {
       display: flex;
       justify-content: center;
       align-items: center;
       width: 100%;
       height: 10%;
     }
     input {
       padding: 10px;
       border: none;
       border-radius: 10px 0px 0px 10px;
       outline: none;
       font-size: 20px;
       max-width: 70%;
       box-shadow: 5px 5px 7px rgba(0, 0, 0, 0.3);
     }
     input::placeholder {
       font-size: 18px;
       color: black;
       opacity: 0.3;
       padding-left: 10px;
     }
     .save {
       font-size: 20px;
       padding: 10px;
       border: none;
       border-radius: 0px 10px 10px 0px;
       background-color: white;
       border-left: 1px solid #CCCCCC;
     }
     .con-cont {
       overflow-y: scroll;
       height: 70%;
       width: 100%;
     }
     .cont {
       display: flex;
       justify-content: center;
       align-items: center;
       flex-direction: column;
       width: 100%;
       transition: 0.3s;
       min-height: 100px;
     }
     .notes {
       background-color: white;
       margin: 10px;
       width: 80%;
       display: flex;
       justify-content: space-between;
       border-radius: 10px;
       box-shadow: 5px 5px 7px rgba(0, 0, 0, 0.3);
     }
     .notes-anim {
       animation: remove 0.2s linear;
     }
     @keyframes remove {
       0% {
         transform: translateX(0%);
       }
       100% {
         transform: translateX(-100%);
       }
     }
     .notes p {
       user-select: all;
       font-size: 18px;
       padding: 10px;
       width: 100%;
     }
     .num {
      padding: 0;
      all: initial;
      user-select: none;
      font-size: 18px;
      border-right: 1px solid #CCCCCC;
      text-align: center;
      padding: 5px;
      padding-top: 10px;
      border-radius: 10px 0px 0px 10px;
     }
     .delete {
      width: 50px;
      height: auto;
      border-radius: 0px 10px 10px 0px;
      background-color: white;
      padding: 0;
      margin: 0;
      font-size: 30px;
      font-weight: bold;
      text-align: center;
      border: none;
      border-left: 1px solid #CCCCCC;
     }
     .remove {
      text-align: center;
      font-size: 17px;
      padding: 10px 0px;
      width: 80%;
      background-color: white;
      border-radius: 10px;
      box-shadow: 5px 5px 7px rgba(0, 0, 0, 0.3);
     }
     .nonotes {
       margin-top: 50px;
       font-size: 20px;
       color: white;
       border: 2px solid #FFFFFF;
       border-radius: 10px;
       padding: 10px 50px;
     }
    </style>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
</head>

<body>
 
 <div id="root" class="root"></div>
 
 <script type="text/babel">
  const Note = ({ note, index, editnote, isworking }) => {
    return(
      <div className="notes">
        <span className="num">{ index + 1 }</span>
        <p>{ note }</p>
        <button disabled={isworking} onClick={(e) => {editnote(e, index)}} className="delete">&times;</button>
      </div>
    );
  }
  const App = () => {
    const [ notes, setnotes ] = React.useState([]);
    const [ newnote, setnewnote ] = React.useState('');
    const [ isworking, setisworking ] = React.useState(false);
    const savenote = (e) => {
      e.preventDefault();
      const pattern = /^\s*$/g;
      if (pattern.test(newnote)) {
        alert('please write something');
      }else {
        setnotes([...notes, newnote]);
        setnewnote('');
      }
    }
    const editnote = (e, index) => {
      setisworking(true);
      e.target.parentNode.className = 'notes notes-anim';
      setTimeout(() => {
        setnotes(notes.filter((note) => notes.indexOf(note) !== index))
        setisworking(false);
      }, 200);
    }
    const removeall = () => {
      if (confirm('delete all notes from storage')) {
      setnotes([]);
      }else {
        return;
      }
    }
    React.useEffect(() => {
      if (localStorage.getItem('notes')) {
        setnotes(JSON.parse(localStorage.getItem('notes')));
      }else {
        setnotes([]);
      }
    }, []);
    React.useEffect(() => {
      localStorage.setItem('notes', JSON.stringify(notes));
    }, [notes]);
    return(
      <div className="root">
        <div className="header">
          <p>Notebook</p>
        </div>
        <form onSubmit={savenote} className="input_cont">
          <input onChange={(e) => setnewnote(e.target.value)} type="text" value={newnote} placeholder="write a note"/>
          <input type="submit" className="save" value="save"/>
        </form>
        <div className="con-cont">
          <div className="cont">
            {notes.length !== 0 &&
              notes.map((note, index) => (
                <Note note={ note } index={ index } editnote={ editnote } isworking={isworking} key={ index }/>
              ))
            }
            {notes.length == 0 &&
              <div className="nonotes">
                <p>No Saved Notes</p>
              </div>
            }
          </div>
        </div>
        <div className="input_cont">
          <div onClick={removeall} className="remove">Remove All</div>
        </div>
      </div>
    );
  }
   
   
  ReactDOM.render(<App />, document.getElementById('root'));
 </script>
 
 
</body>

</html>